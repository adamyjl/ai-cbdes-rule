# 图形化搭建页 - 页面设计说明（桌面优先）

## Layout
- 桌面优先三栏布局：CSS Grid `280px 1fr 360px`；页面主体高度占满视口（减去顶部栏）。
- 画布区域使用 Flex + 绝对定位叠层：底层网格背景、中层节点/连线、上层工具条与浮层。
- 响应式：
  - >=1200px：三栏固定展示。
  - 768–1199px：右侧面板可折叠为 Drawer；默认展开“属性”。
  - <768px：不作为主要目标；提示“建议桌面端使用”，仍可堆叠为上下结构。

## Meta Information
- title: 图形化搭建
- description: 通过拖拽画布编排模块流程，并在右侧配置属性与执行测试。
- og:title: 图形化搭建
- og:description: 左模块树/中画布/右属性与测试。

## Global Styles
- Design Tokens（建议）
  - background: #0B0F1A
  - surface: #111827
  - border: #1F2937
  - textPrimary: #E5E7EB
  - textSecondary: #9CA3AF
  - accent: #2563EB
  - success: #16A34A, warning: #F59E0B, danger: #DC2626
- Typography
  - Base 14px；面板标题 16–18px；画布节点标题 13–14px；代码/日志等宽字体。
- 交互状态
  - 可拖拽项 hover 高亮边框；拖拽中显示 ghost。
  - 主按钮（保存/测试）loading 状态 + 顶部 toast 反馈。

## Page Structure
- 顶部栏（Header）：面包屑 + 页面标题 + 操作区（保存、运行测试）。
- 主体三栏：
  1) 左：模块树（可拖拽）
  2) 中：画布（拖拽放置/连线/缩放）
  3) 右：属性与测试（Tab）

## Sections & Components

### 1) 顶部栏（Header）
- 左侧
  - Breadcrumb：在线代码生产线 / 图形化搭建
  - 标题：图形化搭建
- 右侧操作
  - 按钮：保存草稿（primary）
  - 按钮：运行测试（secondary，默认测试“当前画布”）
  - 状态提示：未保存/已保存；测试运行中 spinner

### 2) 左侧模块树（Module Tree Panel）
- 结构
  - 搜索框：Placeholder“搜索模块/函数”
  - 分组列表（Accordion）
    - 分组标题：模块名 + 数量
    - 列表项：可拖拽条目（名称 + 简短说明/签名（若有））
- 交互
  - 拖拽开始：生成拖拽预览卡
  - 拖拽到画布：在放置点创建节点
  - 空状态：无匹配结果时提示清空搜索

### 3) 中央画布（Canvas）
- 画布基础
  - 背景：点阵/网格（可开关）
  - 操作：滚轮缩放、按住空白处拖拽平移、框选（可选）
  - 工具条（右上角浮层）：缩放比例、居中、适配视图
- 节点与连线
  - 节点：标题（名称）+ 端口（输入/输出）+ 状态角标（未配置/可测试/测试失败）
  - 连线：从输出端口拖到输入端口创建；不允许则显示红色提示
- 画布编辑
  - 选中：单击高亮节点/连线，同时驱动右侧面板内容
  - 删除：Del 删除选中节点/连线（需二次确认可选）
  - 右键菜单（可选）：删除/复制节点/查看属性

### 4) 右侧面板（Properties & Test Panel）
- Tabs：属性 / 测试

#### 4.1 属性 Tab
- 未选中任何元素：提示“在画布中选择节点以编辑属性”
- 选中节点时
  - 基本信息：名称（可编辑）、所属模块（只读）
  - 参数区：键值表单（根据节点类型渲染最小必要字段）
  - 映射区：输入/输出字段映射（下拉选择或文本输入，按现有数据结构约束）
  - 校验提示：缺必填项时显示 warning，并同步到节点角标
- 选中连线时
  - 展示：来源节点/目标节点
  - 可编辑：映射规则（如有）/删除连线按钮

#### 4.2 测试 Tab
- 测试对象切换
  - 单选：测试“当前选中节点” / 测试“整个画布”
- 测试输入
  - Textarea 或小型代码编辑器：填写 JSON/文本（最小可用）
- 执行与结果
  - 按钮：执行测试（primary）
  - 结果摘要：success/failed + 耗时
  - 输出区：output（可折叠）
  - 错误区：errorMessage（失败时高亮）
  - 日志区：logs（等宽字体，支持复制）

## Interaction & Transition Guidelines
- 面板切换：200ms ease-in-out。
- 拖拽放置：节点落点吸附到 8px 网格（可选），提升对齐体验。
- 错误提示：尽量就近展示（节点角标 + 右侧字段提示），同时保留 toast 概览。